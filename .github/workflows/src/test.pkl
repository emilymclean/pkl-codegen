amends "package://github.com/emilymclean/pkl-github-actions/releases/download/v0.1.0-alpha.96/pkl-github-actions@0.1.0-alpha.96#/actions.pkl"
import "lib/base.pkl"

name = "Test Java, Kotlin, and Swift Docker images on latest version"

on = new On {
    pull_request = new PullRequest {
        branches = new Listing {
            "main"
            "develop"
        }
    }
}

jobs = new Mapping {
    for (platform in base.PLATFORMS) {
        ["test-\(platform)"] = base.testPlatform(platform, "${{ env.PKL_VERSION }}", true)
    }
}.toMap().filter((k,v) -> v != null).toMapping()

